<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Personal Finance Manager</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="logo">
                <span style="font-size: 2em;">üíº</span>
                <h1>FinanceTracker</h1>
            </div>
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item active" onclick="showPage('dashboard')">
                        <span>üìä</span> ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                    </li>
                    <li class="nav-item" onclick="showPage('transactions')">
                        <span>üí∏</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </li>
                    <li class="nav-item" onclick="showPage('budget')">
                        <span>üéØ</span> ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
                    </li>
                    <li class="nav-item" onclick="showPage('reports')">
                        <span>üìà</span> ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                    </li>
                    <li class="nav-item" onclick="showPage('categories')">
                        <span>üè∑Ô∏è</span> ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                    </li>
                    <li class="nav-item" onclick="showPage('goals')">
                        <span>üèÜ</span> ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                    </li>
                </ul>
            </nav>
        </aside>

        <header class="header">
            <div class="search-bar">
                <input type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£..." id="searchInput">
            </div>
            <div class="user-menu">
                <button class="notification-btn">
                    <span style="font-size: 1.2em;">üîî</span>
                    <span class="badge">3</span>
                </button>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ!</span>
                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--gradient-primary); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">U</div>
                </div>
            </div>
        </header>

        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <div class="dashboard-grid">
                    <div class="card stat-card" style="background: linear-gradient(135deg, #00c851 0%, #77ffb0 100%); color: white;">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-value" id="totalIncome">‡∏ø0</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.8);">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    </div>
                    <div class="card stat-card" style="background: linear-gradient(135deg, #ff4444 0%, #ff6e6e 100%); color: white;">
                        <div class="stat-icon">üí∏</div>
                        <div class="stat-value" id="totalExpense">‡∏ø0</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.8);">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    </div>
                    <div class="card stat-card" style="background: linear-gradient(135deg, #33b5e5 0%, #79deff 100%); color: white;">
                        <div class="stat-icon">üè¶</div>
                        <div class="stat-value" id="balance">‡∏ø0</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.8);">‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <h3 style="margin-bottom: 20px;">üìä ‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ (7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)</h3>
                        <div class="chart-container">
                            <canvas id="weeklyChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3 style="margin-bottom: 20px;">ü•ß ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</h3>
                        <div class="chart-container">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 style="margin-bottom: 20px;">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                    <div id="recentTransactions" class="transaction-list"></div>
                </div>
            </div>

            <!-- Transactions Page -->
            <div id="transactions" class="page">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h2>üí∏ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                        <button class="btn btn-primary" onclick="showModal('transactionModal')">
                            ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                        </button>
                    </div>
                    
                    <div class="filter-bar">
                        <div class="filter-group">
                            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</label>
                            <select id="filterType" onchange="applyFilters()">
                                <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                                <option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
                                <option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà:</label>
                            <select id="filterCategory" onchange="applyFilters()">
                                <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>‡∏à‡∏≤‡∏Å:</label>
                            <input type="date" id="filterDateFrom" onchange="applyFilters()">
                        </div>
                        <div class="filter-group">
                            <label>‡∏ñ‡∏∂‡∏á:</label>
                            <input type="date" id="filterDateTo" onchange="applyFilters()">
                        </div>
                    </div>
                    
                    <div id="allTransactions" class="transaction-list"></div>
                </div>
            </div>

            <!-- Budget Page -->
            <div id="budget" class="page">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h2>üéØ ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</h2>
                        <button class="btn btn-primary" onclick="showModal('budgetModal')">
                            ‚ûï ‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
                        </button>
                    </div>
                    
                    <div id="budgetList"></div>
                </div>
            </div>

            <!-- Reports Page -->
            <div id="reports" class="page">
                <div class="dashboard-grid">
                    <div class="card">
                        <h3>üìà ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h3>
                        <div class="chart-container">
                            <canvas id="monthlyChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>üìä ‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</h3>
                        <div class="chart-container">
                            <canvas id="trendChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Categories Page -->
            <div id="categories" class="page">
                <div class="card">
                    <h2 style="margin-bottom: 25px;">üè∑Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h2>
                    <div class="category-chips" id="categoryChips"></div>
                    <button class="btn btn-primary" onclick="showModal('categoryModal')" style="margin-top: 20px;">
                        ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                    </button>
                </div>
            </div>

            <!-- Goals Page -->
            <div id="goals" class="page">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h2>üèÜ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</h2>
                        <button class="btn btn-primary" onclick="showModal('goalModal')">
                            ‚ûï ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                        </button>
                    </div>
                    <div id="goalsList"></div>
                </div>
            </div>
        </main>

        <!-- Quick Add Button -->
        <div class="quick-add">
            <button class="fab" onclick="showModal('transactionModal')">+</button>
        </div>
    </div>

    <!-- Transaction Modal -->
    <div id="transactionModal" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</h3>
            <div class="form-grid">
                <div class="form-group full-width">
                    <label>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</label>
                    <input type="text" id="transactionDescription" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô">
                </div>
                <div class="form-group">
                    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
                    <input type="number" id="transactionAmount" placeholder="0.00" step="0.01">
                </div>
                <div class="form-group">
                    <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                    <select id="transactionType" onchange="updateCategoryOptions()">
                        <option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
                        <option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                    <select id="transactionCategory"></select>
                </div>
                <div class="form-group">
                    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                    <input type="date" id="transactionDate">
                </div>
                <div class="form-group full-width">
                    <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                    <textarea id="transactionNote" rows="3" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."></textarea>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="hideModal('transactionModal')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-primary" onclick="saveTransaction()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- Budget Modal -->
    <div id="budgetModal" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">üéØ ‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                    <select id="budgetCategory"></select>
                </div>
                <div class="form-group">
                    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
                    <input type="number" id="budgetAmount" placeholder="0.00" step="0.01">
                </div>
                <div class="form-group">
                    <label>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</label>
                    <input type="month" id="budgetMonth">
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="hideModal('budgetModal')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-primary" onclick="saveBudget()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- Category Modal -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">üè∑Ô∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                    <input type="text" id="categoryName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á">
                </div>
                <div class="form-group">
                    <label>‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô</label>
                    <input type="text" id="categoryIcon" placeholder="üçî">
                </div>
                <div class="form-group full-width">
                    <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                    <select id="categoryType">
                        <option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
                        <option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
                    </select>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="hideModal('categoryModal')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-primary" onclick="saveCategory()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- Goal Modal -->
    <div id="goalModal" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">üèÜ ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</label>
                    <input type="text" id="goalName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏∑‡πâ‡∏≠‡∏£‡∏ñ, ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®">
                </div>
                <div class="form-group">
                    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</label>
                    <input type="number" id="goalAmount" placeholder="0.00" step="0.01">
                </div>
                <!-- REMOVED: goalSavedAmount as per your provided HTML -->
                <div class="form-group">
                    <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</label>
                    <input type="date" id="goalDate">
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="hideModal('goalModal')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn btn-primary" onclick="saveGoal()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
    </div>

    <!-- Custom Alert/Confirm Modal -->
    <div id="customAlertModal" class="modal">
        <div class="modal-content">
            <h3 id="customAlertTitle" style="margin-bottom: 15px; color: var(--primary);"></h3>
            <p id="customAlertMessage" style="margin-bottom: 25px; color: #333;"></p>
            <div class="btn-group" id="customAlertBtnGroup">
                <!-- Buttons will be injected by JS -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
